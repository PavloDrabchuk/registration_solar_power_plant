<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Spring Boot User Authentication</title>
    <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script src="https://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>
</head>
<body>

<h3>Solar Plant By Id</h3>

<table border="1px">
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>City</th>
    </tr>
    <tr>
        <td th:text="${solarPowerPlant.get().getId()}"></td>
        <td th:utext="${solarPowerPlant.get().getName()}"></td>
        <td th:utext="${solarPowerPlant.get().getLocation().getCity()}"></td>
    </tr>

</table>

<div style="width: 800px;height: 600px;" id="mapBlock"></div>
<script th:inline="javascript">
    //alert([[${solarPowerPlant.get().getLocation().getLongitude}]]);
    //console.log("lat: " + [[${solarPowerPlant.get().getLocation().getLatitude}]]);

    let map = new OpenLayers.Map("mapBlock", {
        controls: [
            new OpenLayers.Control.Navigation(),
            new OpenLayers.Control.PanZoomBar(),
            new OpenLayers.Control.LayerSwitcher(),
            new OpenLayers.Control.Attribution()],
        //maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
        //maxResolution: 156543.0399,
        numZoomLevels: 19,
        //units: 'm',
        projection: new OpenLayers.Projection("EPSG:900913"),
        displayProjection: new OpenLayers.Projection("EPSG:4326")
    });

    // Define the map layer
    // Here we use a predefined layer that will be kept up to date with URL changes
    layerMapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");
    map.addLayer(layerMapnik);
    layerCycleMap = new OpenLayers.Layer.OSM.CycleMap("CycleMap");
    map.addLayer(layerCycleMap);
    layerMarkers = new OpenLayers.Layer.Markers("Markers");
    map.addLayer(layerMarkers);


    // Start position for the map (hardcoded here for simplicity,
    // but maybe you want to get this from the URL params)
    var lat = [[${solarPowerPlant.get().getLocation().getLongitude}]];
    var lon = [[${solarPowerPlant.get().getLocation().getLatitude}]];
    var zoom = 12;
    var lonLat = new OpenLayers.LonLat(lon, lat).transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());

    // Add a Layer with Marker
    var size = new OpenLayers.Size(21, 25);
    var offset = new OpenLayers.Pixel(-(size.w / 2), -size.h);
    var icon = new OpenLayers.Icon('https://www.openstreetmap.org/openlayers/img/marker.png', size, offset);
    layerMarkers.addMarker(new OpenLayers.Marker(lonLat, icon));

    map.setCenter(lonLat, zoom);
</script>


</body>
</html>